#!/usr/bin/env bash

# Mac sound names found in "~/Library/Sounds" and "/System/Library/Sounds"
MAC_SOUND="Glass"
LINUX_SOUND="/usr/share/sounds/freedesktop/stereo/complete.oga"

function def_usage() {
  cat << _EOF_
Usage:    notify <title> [<message>]
_EOF_
}

function mac_notification() {
  /usr/bin/osascript -e "display notification \"${*:2}\" with title \"$1\" sound name \"$MAC_SOUND\""
}

function send_notification() {
  case "$OSTYPE" in
    (darwin*)
      mac_notification "$@"
      ;;
    (linux-gnu)
      /usr/bin/notify-send "$@" && /usr/bin/paplay $LINUX_SOUND
      ;;
    (*)
      printf '%s: your OS is not currently supported by this script\n' "$(basename "$0")" >&2
      ;;
  esac
}

function main() {
  if [[ -z "$*" ]]; then
    send_notification "Shell Output" "$(</dev/stdin)"
  else
    send_notification "$@"
  fi
}

main "$@"
